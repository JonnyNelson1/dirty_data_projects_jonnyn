---
title: "Exploration"
author: "Jonny Nelson"
date: "23/11/2021"
output: html_document
---

```{r}
glimpse(candy_data_2015)

library(janitor)

library(tidyverse)

names(candy_data_2015)
```


# Cleaning Script for Candy 2015 Data


```{r}
cleaning_script_2015 <- function(candy_data_2015){
  
  candy_data_2015 %>%
    
    rename("entry" = "Timestamp",
           "age" = "How old are you?",
           "going_out" = "Are you going actually going trick or treating yourself?",
           "black_and_orange_wrappers" = "[Anonymous brown globs that come in black and orange wrappers]",
           "vials_of_hfcs" = "[Vials of pure high fructose corn syrup, for main-lining into your vein]",
           "cheap_candy" = "[Candy that is clearly just the stuff given out for free at restaurants]",
           "toblerone" = "[Tolberone something or other]",
           "chick_o_stick" = "[Chick-o-Sticks (we don’t know what that is)]",
           "circus_peanuts" = "[Those odd marshmallow circus peanut things]") %>%
    
    select(-"[Cash, or other forms of legal tender]", -"[Dental paraphenalia]", -"[Generic Brand Acetaminophen]", -"[Broken glow stick]", -"[Healthy Fruit]", -"[Hugs (actual physical hugs)]", -"[Kale smoothie]", -"[Lapel Pins]", -"[Pencils]", -"[Peterson Brand Sidewalk Chalk]", -"[Vicodin]", -"[White Bread]", -"[Whole Wheat anything]", -c(97:124)) %>%
  
    clean_names() 
    # mutate(entry_id = as.character(row_number()+2015)) %>%
    # pivot_longer(cols = 4:83,
    #              names_to = "candy_name",
    #              values_to = "rating") 
  # mutate(id = as.numeric_version(entry))
  
}

clean_candydata_2015 <- cleaning_script_2015(candy_data_2015)

clean_candydata_2015$entry <- 2015

```

```{r}
cleaning_script_2015_02 <- function(candy_data_2015){
  
  clean_candydata_2015 %>%
     pivot_longer(cols = 4:83,
                  names_to = "candy_name",
                  values_to = "rating") 
    
}

clean_2015 <- cleaning_script_2015_02(clean_candydata_2015)
```


```{r}
names(clean_candydata_2015)

glimpse(clean_candydata_2015)
```


# Cleaning Script for Candy 2016 Data


```{r}
cleaning_script_2016 <- function(candy_data_2016){
  
  candy_data_2016 %>%
    
    rename("entry" = "Timestamp",
           "age" = "How old are you?",
           "going_out" = "Are you going actually going trick or treating yourself?",
           "gender" = "Your gender:",
           "country" = "Which country do you live in?",
           "province" = "Which state, province, county do you live in?",
           "bonkers" = "[Bonkers (the candy)]",
           "sour_patch_kids" = "[Sourpatch Kids (i.e. abominations of nature)]",
           "sweetums" = "[Sweetums (a friend to diabetes)]",
           "black_and_orange_wrappers" = "[Anonymous brown globs that come in black and orange wrappers]",
           "vials_of_hfcs" = "[Vials of pure high fructose corn syrup, for main-lining into your vein]",
           "cheap_candy" = "[Candy that is clearly just the stuff given out for free at restaurants]",
           "toblerone" = "[Tolberone something or other]",
           "chick_o_stick" = "[Chick-o-Sticks (we don’t know what that is)]",
           "circus_peanuts" = "[Those odd marshmallow circus peanut things]") %>%
    
    select(-"[Bonkers (the board game)]", -"[Chardonnay]", -"[Creepy Religious comics/Chick Tracts]",-"[Person of Interest Season 3 DVD Box Set (not including Disc 4 with hilarious outtakes)]", -"[Cash, or other forms of legal tender]", -"[Dental paraphenalia]", -"[Generic Brand Acetaminophen]", -"[Broken glow stick]", -"[Healthy Fruit]", -"[Hugs (actual physical hugs)]", -"[Kale smoothie]", -"[Pencils]", -"[Vicodin]", -"[White Bread]", -"[Whole Wheat anything]", -c(107:123)) %>%
  
    clean_names() 
    # mutate(entry_id = as.character(row_number()+2015)) %>%
    # pivot_longer(cols = 4:83,
    #              names_to = "candy_name",
    #              values_to = "rating") 
  # mutate(id = as.numeric_version(entry))
  
}


clean_candydata_2016 <- cleaning_script_2016(candy_data_2016)

clean_candydata_2016$entry <- 2016

clean_candydata_2016 %>%
      mutate(entry = str_c(entry, "_", row_number(), sep = ""))

names(clean_candydata_2016)
```

```{r}

cleaning_script_2016_02 <- function(candy_data_2016){
  
  clean_candydata_2016 %>%
     pivot_longer(cols = 7:91,
                  names_to = "candy_name",
                  values_to = "rating") 
    
}

clean_2016 <- cleaning_script_2016_02(clean_candydata_2016)

```

```{r}
clean_candydata_2016 %>%
  select(country, province) %>%
  group_by(country) %>%
  arrange((country)) %>%
  head(1259,)
```

